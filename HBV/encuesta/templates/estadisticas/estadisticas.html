<!-- Heredar de baseUser.html -->
{% extends "plantillasBase/baseUser.html" %}

<!-- Cargar archivos estáticos -->
{% load static %}

<!-- Modificar contenido del bloque meta -->
{% block meta %}
	<title>Consultar Estadísticas</title>
	<script src="{% static 'highcharts/highcharts.js' %}"></script>
	<script src="{% static 'highcharts/modules/exporting.js' %}"></script>
	<script src=" {% static 'highcharts/modules/export-data.js' %}"></script>
	<script src="{% static 'highcharts/modules/accessibility.js' %}"></script>
{% endblock %}

<!-- Modificar contenido del bloque content-->
{% block content %}
	<h1 class="text-center text-info font-weight-bold">PROBLEMAS PARA LA ADQUISICIÓN DE PRODUCTOS ALIMENTICIOS</h1>
	<br>
	<br>
	<div class="col">
		<p style = "font-size: 15px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<i class="fas fa-clipboard-list fa-lg" style="color: #23D558;"></i>&nbsp; Encuestas procesadas: {{ encuestas_procesadas }}</p>
		<p style = "font-size: 15px">&nbsp;&nbsp;&nbsp;&nbsp;<i class="fas fa-exclamation-triangle fa-lg" style="color: #EE9308;"></i> Problemas agrupados en: {{ cantidad_categorias }} categorías</p>
		<p style = "font-size: 15px">&nbsp;&nbsp;&nbsp;&nbsp;<i class="fas fa-list-ol fa-lg" style="color: #8563BA;"></i> Preguntas por encuesta: {{ cantidad_preguntas }}</p>
	</div>
	<br>
	<br>
	<!-- Contenedor de los diferentes gráficos -->
	<div class="container-fluid">
		<!-- Gráfico principal -->
		<div class="row">
			<div class="col-lg-12">
				<div id="container"></div>
			</div>
		</div>
		<br>
		<br>
		<br>
		<br>
		<div class="row">
			<!-- Gráfico Categoría Economía -->
			<div class="col-lg-6">
				<div id="container-economia"></div>
			</div>
			<br>
			<br>
			<br>
			<br>
			<!-- Gráfico Categoría Escases -->
			<div class="col-lg-6">
				<div id="container-escases"></div>
			</div>
		</div>
		<br>
		<br>
		<br>
		<br>
		<div class="row">
			<!-- Gráfico Categoría Miedo a contagiarse -->
			<div class="col-lg-6">
				<div id="container-miedo"></div>
			</div>
			<br>
			<br>
			<!-- Gráfico Categoría Trabajo -->
			<div class="col-lg-6">
				<div id="container-trabajo"></div>
			</div>
		</div>
		<br>
		<br>
		<br>
		<br>	
		<div class="row">
			<!-- Gráfico Categoría Transporte -->
			<div class="col-lg-12 center-block">
				<div class="col-lg-6 ml-auto mr-auto">
					<div id="container-transporte"></div>
				</div>
			</div>
		</div>
		<br>
		<br>
	</div>
{% endblock %}

<!-- Modificar bloque sobre nosotros -->
{% block sobreN %}
	<div class="content-fluid bg-dark text-white">
		<div class="container ">
			<a name="SobreNosotros"></a>
			<br>
			<br>
			<br>
			<h3>Sobre nosotros</h3>
			<br>
			<div class="row">
				<div class="col-lg-1">
					<i class="fas fa-users fa-3x" style="color: #FFFFFF;"></i>
				</div>
				<div class="col-lg-11">
					<p class="text-justify">
						Somos un grupo de estudiantes de la carrera de Ingeniería de Sistemas Informáticos de la <b>Universidad de El Salvador</b> encargados del análisis, diseño, programación e implementación de la aplicación web denominada HBV; actualmente nos encontramos cursando el semestre Herramientas de Productividad en el GT01, impartido por el Ing. Boris Montano.
					</p>
				</div>
			</div>
			<br>
			<br>
			<h5>Personal involucrado:</h5>
			<br>
			<div class="row">
				<div class="col-lg-1">
					<i class="fas fa-user-graduate fa-3x"></i>
				</div>
				<div class="col-lg-4">
					<p class="text-justify">
						Marvin Alexander Sánchez Hidalgo
					</p>
				</div>
				<div class="col-lg-7">
					<p class="text-justify">
						<small>[Analista, diseñador y programador]</small>
					</p>
				</div>
			</div>
			<br>
			<br>
			<div class="row">
				<div class="col-lg-1">
					<i class="fas fa-user-graduate fa-3x"></i>
				</div>
				<div class="col-lg-4">
					<p class="text-justify">
						Agustín Antonio Ascencio Hernández
					</p>
				</div>
				<div class="col-lg-7">
					<p class="text-justify">
						<small>[Analista, diseñador y programador]</small>
					</p>
				</div>
			</div>
			<br>
			<br>
			<div class="row">
				<div class="col-lg-1">
					<i class="fas fa-user-graduate fa-3x"></i>
				</div>
				<div class="col-lg-4">
					<p class="text-justify">
						Daniel Alberto Baños López
					</p>
				</div>
				<div class="col-lg-7">
					<p class="text-justify">
						<small>[Analista, diseñador y programador]</small>
					</p>
				</div>
			</div>
			<br>
			<br>
			<div class="row">
				<div class="col-lg-1">
					<i class="fas fa-user-graduate fa-3x"></i>
				</div>
				<div class="col-lg-4">
					<p class="text-justify">
						Diego Josué Carpio Portillo
					</p>
				</div>
				<div class="col-lg-7">
					<p class="text-justify">
						<small>[Analista, diseñador y programador]</small>
					</p>
				</div>
			</div>
			<br>
			<br>
			<h3>Sobre la app</h3>
			<br>
			<div class="row">
				<div class="col-lg-1">
					<i class="fas fa-window-restore fa-4x" style="color: #FFFFFF;"></i>
				</div>
				<div class="col-lg-11">
					<p class="text-justify">
						La aplicación tiene como objetivo mostrar al usuario estadísticas que representan el acumulado según la categoría a la cual pertenece el problema en estudio, así como también se presentan los acumulados por pregunta realizada a los encuestados. Está basada en el diseño web mobile-first, por lo cual es compatible con cualquier tamaño de pantalla, mostrando un diseño suave y agradable a la vista del usuario; presentando así, la información estadística bajo cualquier circunstancia.
					</p>
				</div>
			</div>
			<br>
			<br>
			<img src="{% static 'img/MinervaUesLogoBlanco.png' %}" class="mx-auto d-block" />
		</div>
	</div>
{% endblock %}

<!-- Modificar contenido del bloque script-->
{% block script %}
	<script type="text/javascript">
		//Gráfico Principal
		Highcharts.chart('container', {
    chart: {
        type: 'column'
    },
    title: {
        text: 'Cantidad acumulada de los problemas agrupados en categorías que la población persibe durante esta pandemia'
    },
    subtitle: {
        text: 'Obtenido por cada respuesta afirmativa de las encuestas procesadas según la categoria a la que pertenece el problema'
    },
    xAxis: {
        categories: {{ categorias|safe }},
        crosshair: true
    },
    yAxis: {
        min: 0,
        title: {
            text: 'Acumulado por categoría'
        }
    },
    tooltip: {
        headerFormat: '<span style="font-size:15px">{point.key}</span><table>',
        pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
            '<td style="padding:0"><b>&nbsp;{point.y}</b></td></tr>',	//{point.y:.1f}
        footerFormat: '</table>',
        shared: true,
        useHTML: true
    },
    plotOptions: {
        column: {
            pointPadding: 0.2,
            borderWidth: 0
        }
    },
    series: [{
        name: 'Acumulado',
        showInLegend: false,
        colorByPoint: true,
        data: {{ data_main_graph|safe }}/*[49.9, 71.5, 106.4, 129.2, 144.0]*/

    }]
		});


		//Gráfico Categoría Economía
		Highcharts.chart('container-economia', {
    chart: {
        type: 'column'
    },
    title: {
        text: '{{ nombre_categoria_uno|safe }}'//'Economía'
    },
    subtitle: {
        text: 'Probemas relacionados con {{ nombre_categoria_uno|safe }}'//economía
    },
    xAxis: {
        categories: {{ categories_uno_graph|safe }},
        crosshair: true
    },
    yAxis: {
        min: 0,
        title: {
            text: 'Acumulado'
        }
    },
    tooltip: {
        headerFormat: '<span style="font-size:15px">{point.key}</span><table>',
        pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
            '<td style="padding:0"><b>&nbsp;{point.y}</b></td></tr>',
        footerFormat: '</table>',
        shared: true,
        useHTML: true
    },
    plotOptions: {
        column: {
            pointPadding: 0.2,
            borderWidth: 0
        }
    },
    series: [{
        name: 'Acumulado',
        showInLegend: false,
        colorByPoint: true,
        data: {{ data_uno_graph|safe }}
    }]
	});

	//Gráfico Categoría Escases
		Highcharts.chart('container-escases', {
    chart: {
        type: 'column'
    },
    title: {
        text: '{{ nombre_categoria_dos }}'
    },
    subtitle: {
        text: 'Probemas relacionados con {{ nombre_categoria_dos }}'
    },
    xAxis: {
        categories: {{ categories_dos_graph|safe }},
        crosshair: true
    },
    yAxis: {
        min: 0,
        title: {
            text: 'Acumulado'
        }
    },
    tooltip: {
        headerFormat: '<span style="font-size:15px">{point.key}</span><table>',
        pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
            '<td style="padding:0"><b>&nbsp;{point.y}</b></td></tr>',
        footerFormat: '</table>',
        shared: true,
        useHTML: true
    },
    plotOptions: {
        column: {
            pointPadding: 0.2,
            borderWidth: 0
        }
    },
    series: [{
        name: 'Acumulado',
        showInLegend: false,
        colorByPoint: true,
        data: {{ data_dos_graph|safe }}
    }]
	});

	//Gráfico Categoría Miedo  a contagiarse
		Highcharts.chart('container-miedo', {
    chart: {
        type: 'column'
    },
    title: {
        text: '{{nombre_categoria_tres}}'
    },
    subtitle: {
        text: 'Probemas relacionados con {{nombre_categoria_tres}}'
    },
    xAxis: {
        categories: {{ categories_tres_graph|safe }},
        crosshair: true
    },
    yAxis: {
        min: 0,
        title: {
            text: 'Acumulado'
        }
    },
    tooltip: {
        headerFormat: '<span style="font-size:15px">{point.key}</span><table>',
        pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
            '<td style="padding:0"><b>&nbsp;{point.y}</b></td></tr>',
        footerFormat: '</table>',
        shared: true,
        useHTML: true
    },
    plotOptions: {
        column: {
            pointPadding: 0.2,
            borderWidth: 0
        }
    },
    series: [{
        name: 'Acumulado',
        showInLegend: false,
        colorByPoint: true,
        data: {{ data_tres_graph|safe }}
    }]
	});


	//Gráfico Categoría Trabajo
		Highcharts.chart('container-trabajo', {
    chart: {
        type: 'column'
    },
    title: {
        text: '{{nombre_categoria_cuatro}}'
    },
    subtitle: {
        text: 'Probemas relacionados con {{nombre_categoria_cuatro}}'
    },
    xAxis: {
        categories: {{ categories_cuatro_graph|safe }},
        crosshair: true
    },
    yAxis: {
        min: 0,
        title: {
            text: 'Acumulado'
        }
    },
    tooltip: {
        headerFormat: '<span style="font-size:15px">{point.key}</span><table>',
        pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
            '<td style="padding:0"><b>&nbsp;{point.y}</b></td></tr>',
        footerFormat: '</table>',
        shared: true,
        useHTML: true
    },
    plotOptions: {
        column: {
            pointPadding: 0.2,
            borderWidth: 0
        }
    },
    series: [{
        name: 'Acumulado',
        showInLegend: false,
        colorByPoint: true,
        data: {{ data_cuatro_graph|safe }}
    }]
	});	


	//Gráfico Categoría Transporte
		Highcharts.chart('container-transporte', {
    chart: {
        type: 'column'
    },
    title: {
        text: '{{nombre_categoria_cinco}}'
    },
    subtitle: {
        text: 'Probemas relacionados con {{nombre_categoria_cinco}}'
    },
    xAxis: {
        categories: {{ categories_cinco_graph|safe }},
        crosshair: true
    },
    yAxis: {
        min: 0,
        title: {
            text: 'Acumulado'
        }
    },
    tooltip: {
        headerFormat: '<span style="font-size:15px">{point.key}</span><table>',
        pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
            '<td style="padding:0"><b>&nbsp;{point.y}</b></td></tr>',
        footerFormat: '</table>',
        shared: true,
        useHTML: true
    },
    plotOptions: {
        column: {
            pointPadding: 0.2,
            borderWidth: 0
        }
    },
    series: [{
        name: 'Acumulado',
        showInLegend: false,
        colorByPoint: true,
        data: {{ data_cinco_graph|safe }}
    }]
	});	
	</script>
{% endblock %}